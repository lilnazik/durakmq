#:kivy 1.11.1
#:import SPADES durak.SPADES
#:import HEARTS durak.HEARTS
#:import DIAMS durak.DIAMS
#:import CLUBS durak.CLUBS


<Card>:
  font_name: 'resources/Arial.ttf'
  halign: 'center'
  font_size: '32dp'
  width: '64dp'
  height: '120dp'
  size_hint: None, None

  background_normal: 'resources/rounded_corners.png'
  background_down: 'resources/rounded_corners.png'
  border: (24, 24, 24, 24)

  background_color: (1, 1, 1, 1)
  opacity: 1 if root.state == 'normal' else .8

  canvas.before:
    PushMatrix
    Rotate:
      angle: self.rotation
      origin: self.center
  canvas.after:
    PopMatrix

<GameMessageLabel>:
  font_name: 'resources/Arial.ttf'
  font_size: '22dp'
  text: ''
  pos: 0, self.width * 0.25
  color: 1, 1, 1, 1
  opacity: 0


<MainLayout@FloatLayout>:
  canvas.before:
    Rectangle:
      pos: self.pos
      size: self.size
      source: './resources/bg.jpg'

  GameMessageLabel:
    id: game_label
  GameMessageLabel:
    color: 1, 0.4, 0.4, 1
    id: error_label

  Button:
    text: 'Бито!'
    id: finish_turn_button
    visible: False
    background_normal: 'resources/rounded_corners.png'
    background_down: 'resources/rounded_corners.png'
    size_hint: (0.2, 0.06)
    pos_hint: {"center_x":0.5,"center_y":0.32}
    color: 0, 0, 0, 1
    opacity: 1 if self.state == 'normal' else .8
    border: (24, 24, 24, 24)
    on_press: app.on_finish_button()


<MyPopup@Popup>:
  id: popup
  pos: 0, 0
  size_hint: 0.7, 0.3
  FloatLayout:
    Label:
      text: "You pressed the button"
      size_hint: 0.6, 0.2
      pos_hint: {"x":0.2, "top":1}

    Button:
      text: "You pressed the button"
      size_hint: 0.8, 0.2
      pos_hint: {"x":0.1, "y":0.1}
      on_press: popup.dismiss()